(()=>{"use strict";var e,n={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return n.d(i,{a:i}),i},d:(e,i)=>{for(var t in i)n.o(i,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},i={};n.r(i),n.d(i,{default:()=>p}),function(e){e[e.PRESENTED=0]="PRESENTED",e[e.EXPIRED=1]="EXPIRED",e[e.FAILED=2]="FAILED"}(e||(e={}));const t=require("cordova");var r=n.n(t);let l={pushReceivedHandler:null,pushOpenedHandler:null,inAppDeepLinkHandler:null,inAppInboxUpdatedHandler:null,deepLinkHandler:null};function o(){(function(){let e=null!==l.pushOpenedHandler,n=null!==l.deepLinkHandler;return new Promise(((i,t)=>{r().exec(s,t,"OptimoveSDKPlugin","setHandlersCallBackContext",[e,n])}))})().then((e=>{console.log(e)}),(e=>{console.error(e)}))}function s(e){var n;if(!e||"string"==typeof e)return;const i=`${e.type}Handler`;"inAppInboxUpdatedHandler"!==i?null!==l[i]?l[i](e.data):console.log(`Optimove: No handler defined for '${e.type}' event`):null===(n=l[i])||void 0===n||n.call(l)}function a(e){return"string"==typeof e&&""!==e}document.addEventListener("deviceready",(function(){o()}),!1),document.addEventListener("resume",(function(){o()}),!1),document.addEventListener("pause",(function(){new Promise(((e,n)=>{r().exec(e,n,"OptimoveSDKPlugin","clearContext",[])}))}),!1);const p={setUserId:e=>new Promise(((n,i)=>{a(e)?r().exec(n,i,"OptimoveSDKPlugin","setUserId",[e]):i("Invalid user id")})),setUserEmail:e=>new Promise(((n,i)=>{a(e)?r().exec(n,i,"OptimoveSDKPlugin","setUserEmail",[e]):i("Invalid user email")})),reportEvent:(e,n)=>new Promise(((i,t)=>{a(e)?r().exec(i,t,"OptimoveSDKPlugin","reportEvent",[e,n]):t("Invalid event name")})),reportScreenVisit:(e,n)=>new Promise(((i,t)=>{a(e)?void 0===n||a(e)?r().exec(i,t,"OptimoveSDKPlugin","reportScreenVisit",[e,n]):t("Invalid screen category"):t("Invalid screen name")})),registerUser:(e,n)=>new Promise(((i,t)=>{a(e)?a(n)?r().exec(i,t,"OptimoveSDKPlugin","registerUser",[e,n]):t("Invalid user user email"):t("Invalid user id")})),getVisitorId:()=>new Promise(((e,n)=>{r().exec(e,n,"OptimoveSDKPlugin","getVisitorId",[])})),signOutUser:()=>new Promise(((e,n)=>{r().exec(e,n,"OptimoveSDKPlugin","signOutUser",[])})),pushRequestDeviceToken:()=>new Promise(((e,n)=>{r().exec(e,n,"OptimoveSDKPlugin","pushRequestDeviceToken",[])})),pushUnregister:()=>new Promise(((e,n)=>{r().exec(e,n,"OptimoveSDKPlugin","pushUnregister",[])})),inAppUpdateConsent:e=>new Promise(((n,i)=>{r().exec(n,i,"OptimoveSDKPlugin","inAppUpdateConsent",[e])})),inAppGetInboxItems:()=>new Promise(((e,n)=>{r().exec(e,n,"OptimoveSDKPlugin","inAppGetInboxItems",[])})).then((e=>e.map((e=>({id:e.id,title:e.title,subtitle:e.subtitle,availableFrom:null===e.availableFrom?null:new Date(e.availableFrom),availableTo:null===e.availableFrom?null:new Date(e.availableTo),dismissedAt:null===e.availableFrom?null:new Date(e.dismissedAt),sentAt:new Date(e.sentAt),data:e.data,isRead:e.isRead,imageUrl:e.imageUrl}))))),inAppMarkAllInboxItemsAsRead:()=>new Promise(((e,n)=>{r().exec(e,n,"OptimoveSDKPlugin","inAppMarkAllInboxItemsAsRead",[])})),inAppMarkAsRead:e=>new Promise(((n,i)=>{r().exec(n,i,"OptimoveSDKPlugin","inAppMarkAsRead",[e.id])})),inAppGetInboxSummary:()=>new Promise(((e,n)=>{r().exec(e,n,"OptimoveSDKPlugin","inAppGetInboxSummary",[])})),inAppPresentInboxMessage:n=>new Promise(((e,i)=>{r().exec(e,i,"OptimoveSDKPlugin","inAppPresentInboxMessage",[n.id])})).then((n=>{switch(n){case e.PRESENTED:case e.EXPIRED:case e.FAILED:return n;default:return console.error("Unknown presentation result"),e.FAILED}})),inAppDeleteMessageFromInbox:e=>new Promise(((n,i)=>{r().exec(n,i,"OptimoveSDKPlugin","inAppDeleteMessageFromInbox",[e.id])})),setOnInboxUpdatedHandler:e=>{l.inAppInboxUpdatedHandler=e},setPushOpenedHandler(e){l.pushOpenedHandler=e,null!=e&&new Promise(((e,n)=>{r().exec(s,n,"OptimoveSDKPlugin","checkIfPendingPushExists",[])}))},setPushReceivedHandler(e){l.pushReceivedHandler=e},setInAppDeepLinkHandler(e){l.inAppDeepLinkHandler=e},setDeepLinkHandler(e){l.deepLinkHandler=e,new Promise(((e,n)=>{r().exec(s,n,"OptimoveSDKPlugin","checkIfPendingDDLExists",[])}))}};module.exports=i})();